# Code created by Zephiles

# Set global function/variable offsets
.set GP_OFFSET,-0x7D88
.set MAIN_FUNC_OFFSET,0xD70
.set NANDMGR_WORK_PTR_OFFSET,-0x7D50

# Get the index for the file loaded
lwz r4,GP_OFFSET(r13)
lwz r4,0xDC(r4)

# Adjust the index to be in multiples of 0x25B8 bytes
mulli r4,r4,0x25B8

# Add the offset to main function
addi r4,r4,MAIN_FUNC_OFFSET

# Get the NAND File pointer
lwz r5,NANDMGR_WORK_PTR_OFFSET(r13)
lwz r5,0x10(r5)

# Get the start of the main function in the current file
add r12,r5,r4

# Jump to the main function
mtctr r12
bctr